language: cpp

os:
  - osx
  - linux

compiler:
  # - clang
  - gcc

dist: trusty
sudo: false
addons:
  apt:
    sources:
      - sourceline: deb [arch=amd64] https://packages.microsoft.com/ubuntu/14.04/prod trusty main
        key_url: https://packages.microsoft.com/keys/microsoft.asc
    packages:
      - powershell

env:
  - CMAKE_MINOR=3.7 CMAKE_VER=3.7.2

before_install:
  - |
    if [ $TRAVIS_OS_NAME == "linux" ]; then
      export DISPLAY=:99.0
      sh -e /etc/init.d/xvfb start
      sleep 3
    else
      brew tap caskroom/cask       || exit 2
      brew cask install powershell || exit 2
    fi

script: pwsh -NonInteractive -NoProfile -NoLogo scripts/ci.ps1

notifications:
  email:
    on_success: never
    on_failure: never
